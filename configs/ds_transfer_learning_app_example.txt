################################################################################
# SPDX-FileCopyrightText: Copyright (c) 2019-2023 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: LicenseRef-NvidiaProprietary
#
# NVIDIA CORPORATION, its affiliates and licensors retain all intellectual
# property and proprietary rights in and to this material, related
# documentation and any modifications thereto. Any use, reproduction,
# disclosure or distribution of this material and related documentation
# without an express license agreement from NVIDIA CORPORATION or
# its affiliates is strictly prohibited.
################################################################################

[application]
enable-perf-measurement=1
perf-measurement-interval-sec=5
#gie-kitti-output-dir=streamscl
#kitti-track-output-dir=kitti_track
#terminated-track-output-dir=terminated_track
#reid-track-output-dir=reid

[tiled-display]
enable=1
rows=1
columns=2
width=3840
height=1080
gpu-id=0
#(0): nvbuf-mem-default - Default memory allocated, specific to particular platform
#(1): nvbuf-mem-cuda-pinned - Allocate Pinned/Host cuda memory applicable for Tesla
#(2): nvbuf-mem-cuda-device - Allocate Device cuda memory applicable for Tesla
#(3): nvbuf-mem-cuda-unified - Allocate Unified cuda memory applicable for Tesla
#(4): nvbuf-mem-surface-array - Allocate Surface Array memory, applicable for Jetson
nvbuf-memory-type=0

[source-list]
#num-source-bins=2
list=rtsp://100.117.221.97:8554/reid1;rtsp://100.117.221.97:8554/reid2
use-nvmultiurisrcbin=0

[source-attr-all]
enable=1
type=4
num-sources=1
gpu-id=0
cudadec-memtype=0
#select-rtp-protocol=4
#latency=100
#rtsp-reconnect-interval-sec=0



[sink0]
enable=1
#Type - 1=FakeSink 2=EglSink 3=File
type=2
sync=1
source-id=0
gpu-id=0
nvbuf-memory-type=0
qos=0

[sink1]
#source0 output as filesink
enable=0
type=3
#1=mp4 2=mkv
container=1
#1=h264 2=h265
codec=2
#encoder type 0=Hardware 1=Software
enc-type=0
sync=0
#iframeinterval=10
bitrate=2048000
#H264 Profile - 0=Baseline 2=Main 4=High
#H265 Profile - 0=Main 1=Main10
# set profile only for hw encoder, sw encoder selects profile based on sw-preset
profile=4
output-file=out1.mp4
source-id=0

[sink2]
#source1 output as filesink
enable=0
type=3
#1=mp4 2=mkv
container=1
#1=h264 2=h265
codec=2
#encoder type 0=Hardware 1=Software
enc-type=0
sync=0
#iframeinterval=10
bitrate=2048000
#H264 Profile - 0=Baseline 2=Main 4=High
#H265 Profile - 0=Main 1=Main10
# set profile only for hw encoder, sw encoder selects profile based on sw-preset
profile=0
output-file=out2.mp4
source-id=1

[sink3]
enable=0
type=1
sync=1
source-id=1
gpu-id=0
nvbuf-memory-type=0

[osd]
enable=1
gpu-id=0
border-width=1
text-size=15
text-color=1;1;1;1;
text-bg-color=0.3;0.3;0.3;1
font=Serif
show-clock=1
clock-x-offset=800
clock-y-offset=820
clock-text-size=12
clock-color=1;0;0;0
nvbuf-memory-type=0

[streammux]
gpu-id=0
##Boolean property to inform muxer that sources are live
live-source=1
batch-size=2
##time out in usec, to wait after the first buffer is available
##to push the batch even if the complete batch is not formed
batched-push-timeout=40000
## Set muxer output width and height
width=1920
height=1080
##Enable to maintain aspect ratio wrt source, and allow black borders, works
##along with width, height properties
enable-padding=0
nvbuf-memory-type=0
## If set to TRUE, system timestamp will be attached as ntp timestamp
## If set to FALSE, ntp timestamp from rtspsrc, if available, will be attached
attach-sys-ts-as-ntp=0
sync-inputs=1

[pre-process]
enable=0
config-file=config_preprocess.txt

# config-file property is mandatory for any gie section.
# Other properties are optional and if set will override the properties set in
# the infer config file.
[primary-gie]
enable=1
gpu-id=0
model-engine-file=/opt/nvidia/deepstream/deepstream-7.1/samples/models/peoplenet/resnet34_peoplenet_int8.onnx_b2_gpu0_int8.engine
batch-size=2
#input-tensor-meta=1
#Required by the app for OSD, not a plugin property
bbox-border-color0=1;0;0;1
bbox-border-color1=0;1;1;1
bbox-border-color2=0;0;1;1
bbox-border-color3=0;1;0;1
interval=0
gie-unique-id=1
nvbuf-memory-type=0
# Inference using nvinfer:
plugin-type=0
#config-file=config_infer_primary_ds_transfer_learning.txt
config-file=/opt/nvidia/deepstream/deepstream-7.1/sources/apps/sample_apps/deepstream-transfer-learning-app/configs/config_infer_primary_PeopleNet_copy.txt
# Inference using nvinferserver:
#plugin-type=1
#config-file=config_inferserver_primary_ds_transfer_learning.txt

[tracker]
enable=1
# For NvDCF and NvDeepSORT tracker, tracker-width and tracker-height must be a multiple of 32, respectively
tracker-width=960
tracker-height=544
ll-lib-file=/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so
# ll-config-file required to set different tracker types
# ll-config-file=../../../../../samples/configs/deepstream-app/config_tracker_IOU.yml
# ll-config-file=../../../../../samples/configs/deepstream-app/config_tracker_NvSORT.yml
# ll-config-file=../../../../../samples/configs/deepstream-app/config_tracker_NvDCF_perf.yml
ll-config-file=../../../../../samples/configs/deepstream-app/config_tracker_NvDCF_accuracy.yml
# ll-config-file=../../../../../samples/configs/deepstream-app/config_tracker_NvDeepSORT.yml
gpu-id=0
display-tracking-id=1
tracking-id-reset-mode=0
#enable-batch-process=1

[tests]
file-loop=0

[img-save]
enable=0
gpu-id=0
output-folder-path=./output
save-img-cropped-obj=1
save-img-full-frame=0
frame-to-skip-rules-path=capture_time_rules.csv
second-to-skip-interval=600
min-confidence=0.97
max-confidence=1.0
min-box-width=20
min-box-height=20

